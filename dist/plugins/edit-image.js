!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.editImage=e()}(this,function(){"use strict";var t=function(t,e,n){var i=document.createElement(t);if(n)for(var o in n)n.hasOwnProperty(o)&&i.setAttribute(o,n[o]);if(e)for(var a in e)e.hasOwnProperty(a)&&(i[a]=e[a]);return i},e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),i=function(){function t(n){var i=n.name,o=n.className;return e(this,t),this.button=document.createElement("button"),this.button.innerHTML=i,this.button.setAttribute("class",o||""),this.button.onclick=this.onclick.bind(this),this.image=null,this}return n(t,[{key:"getButton",value:function(){return this.button}},{key:"setPosition",value:function(t){var e=t.getBoundingClientRect(),n=e.left,i=e.top,o=t.clientHeight,a=t.clientWidth,u=this.button,l=u.clientHeight,r=u.clientWidth;this.button.style.left=n+a/2-r/2+"px",this.button.style.top=i+o/2-l/2+"px"}},{key:"listenArea",value:function(t){var e=this;t.addEventListener("mousemove",function(t){e.setPosition(t.target),"IMG"===t.target.tagName?(e.image=t.target,e.button.style.visibility="visible"):e.button.style.visibility="hidden"})}},{key:"onclick",value:function(){this.onButtonClick(this)}}]),t}();return{install:function(e){var n=e.nodes,o=n.LEYLIM_ROOT,a=n.AREA_NODE,u=e.$getModal({title:"EDIT IMAGE",button:{cancel:function(){},save:function(){}}}),l="",r=document.querySelector("."+o),s=document.querySelector("."+a),c=new i({name:"EDIT",className:"edit-image"});r.appendChild(c.getButton()),u.onClose=function(){c.image.style.borderRadius="",c.image.src=l},c.onButtonClick=function(){var n=t("div",null,null);l=c.image.src;var i=t("span",{innerHTML:"Source"},{class:"edit-image-title"}),o=t("span",{innerHTML:"Radius"},{class:"edit-image-title"}),a=t("input",null,{value:c.image.src,class:"edit-image-input-form"}),r=t("input",null,{value:"0",type:"range",min:"0",max:c.image.clientWidth/2,class:"edit-image-input-form"});a.oninput=function(){a.value&&(c.image.src=a.value)},r.oninput=function(){c.image.style.borderRadius=r.value+"px"};var s=t("button",{innerHTML:"SAVE"},{class:"edit-image-button"});n.appendChild(i),n.appendChild(a),n.appendChild(o),n.appendChild(r),n.appendChild(s),u.setContent(n),u.open(),s.onclick=function(){c.image.src=a.value,c.image.style.borderRadius=r.value+"px",e.forceUpdate(),c.button.style.visibility="hidden",u.close()}},c.listenArea(s)}}});
